<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–‡è—å¾©èˆˆç•«å®¶çŒœè¬éŠæˆ²</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #8B4513, #D2691E, #F4A460);
            min-height: 100vh;
            padding: 20px;
            color: #2F1B14;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 248, 220, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border: 3px solid #8B4513;
        }

        h1 {
            text-align: center;
            color: #8B4513;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            font-weight: bold;
        }

        .game-area {
            text-align: center;
        }

        .painting-container {
            margin-bottom: 30px;
            position: relative;
        }

        .painting {
            max-width: 400px;
            max-height: 400px;
            width: 100%;
            height: auto;
            border: 8px solid #8B4513;
            border-radius: 10px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease;
            display: block;
            margin: 0 auto;
        }

        .painting:hover {
            transform: scale(1.02);
        }

        .painting-title {
            font-size: 1.3em;
            color: #8B4513;
            margin-top: 15px;
            font-style: italic;
            font-weight: bold;
        }

        .question {
            font-size: 1.4em;
            margin: 20px 0;
            color: #2F1B14;
            font-weight: bold;
        }

        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 30px 0;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }

        .option {
            background: linear-gradient(145deg, #F5DEB3, #DEB887);
            border: 3px solid #8B4513;
            border-radius: 12px;
            padding: 15px 20px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #2F1B14;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.5);
        }

        .option:hover {
            background: linear-gradient(145deg, #DEB887, #CD853F);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .option:active {
            transform: translateY(0);
        }

        .option.correct {
            background: linear-gradient(145deg, #90EE90, #32CD32);
            border-color: #228B22;
            animation: correctAnswer 0.6s ease;
        }

        .option.incorrect {
            background: linear-gradient(145deg, #FFB6C1, #FF6347);
            border-color: #DC143C;
            animation: incorrectAnswer 0.6s ease;
        }

        @keyframes correctAnswer {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes incorrectAnswer {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
            100% { transform: translateX(0); }
        }

        .score-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            font-size: 1.2em;
            font-weight: bold;
            color: #8B4513;
        }

        .next-btn, .start-btn {
            background: linear-gradient(145deg, #CD853F, #8B4513);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2em;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .next-btn:hover, .start-btn:hover {
            background: linear-gradient(145deg, #8B4513, #654321);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .final-score {
            text-align: center;
            font-size: 2em;
            color: #8B4513;
            margin: 30px 0;
            padding: 20px;
            background: rgba(255, 215, 0, 0.2);
            border-radius: 15px;
            border: 2px solid #DAA520;
        }

        .name-input-container {
            margin: 20px 0;
            text-align: center;
        }

        .name-input {
            background: rgba(255, 248, 220, 0.9);
            border: 2px solid #8B4513;
            border-radius: 10px;
            padding: 15px;
            font-size: 1.2em;
            color: #2F1B14;
            text-align: center;
            width: 300px;
            max-width: 90%;
        }

        .name-input:focus {
            outline: none;
            border-color: #CD853F;
            box-shadow: 0 0 10px rgba(205, 133, 63, 0.3);
        }

        .submit-score-btn {
            background: linear-gradient(145deg, #DAA520, #B8860B);
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1.1em;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .submit-score-btn:hover {
            background: linear-gradient(145deg, #B8860B, #9A7B0A);
            transform: translateY(-2px);
        }

        .leaderboard {
            background: rgba(255, 248, 220, 0.9);
            border: 2px solid #8B4513;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
        }

        .leaderboard h3 {
            text-align: center;
            color: #8B4513;
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        .leaderboard-entry {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #DEB887;
        }

        .leaderboard-entry:last-child {
            border-bottom: none;
        }

        .leaderboard-rank {
            font-weight: bold;
            color: #8B4513;
            min-width: 30px;
        }

        .leaderboard-name {
            flex: 1;
            color: #2F1B14;
            margin: 0 15px;
        }

        .leaderboard-score {
            font-weight: bold;
            color: #CD853F;
        }

        .new-record {
            background: rgba(255, 215, 0, 0.3);
            border-radius: 8px;
            animation: newRecordGlow 1s ease-in-out infinite alternate;
        }

        @keyframes newRecordGlow {
            from { background: rgba(255, 215, 0, 0.3); }
            to { background: rgba(255, 215, 0, 0.6); }
        }

        .view-leaderboard-btn {
            background: linear-gradient(145deg, #8B4513, #654321);
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 1em;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
        }

        .view-leaderboard-btn:hover {
            background: linear-gradient(145deg, #654321, #5D4E37);
            transform: translateY(-2px);
        }

        .intro {
            text-align: center;
            font-size: 1.3em;
            color: #2F1B14;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .loading {
            text-align: center;
            font-size: 1.2em;
            color: #8B4513;
            margin: 20px 0;
        }

        .explanation {
            background: rgba(255, 248, 220, 0.9);
            border: 2px solid #8B4513;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            font-size: 1.1em;
            line-height: 1.6;
            color: #2F1B14;
            text-align: left;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .explanation h4 {
            color: #8B4513;
            margin-bottom: 10px;
            font-size: 1.3em;
            text-align: center;
        }

        .explanation-content {
            text-indent: 2em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¨ æ–‡è—å¾©èˆˆç•«å®¶çŒœè¬éŠæˆ² ğŸ¨</h1>
        
        <div id="intro-screen" class="intro">
            <p>æ­¡è¿ä¾†åˆ°æ–‡è—å¾©èˆˆè—è¡“ä¸–ç•Œï¼</p>
            <p>è§€å¯Ÿç•«ä½œï¼ŒçŒœæ¸¬ç•«å®¶æ˜¯èª°ã€‚</p>
            <p>å…±æœ‰ 5 é¡Œï¼Œæ¯é¡Œç­”å°å¾— 20 åˆ†ï¼</p>
            <button class="start-btn" onclick="startGame()">é–‹å§‹éŠæˆ²</button>
            <button class="view-leaderboard-btn" onclick="showLeaderboard()">æŸ¥çœ‹æ’è¡Œæ¦œ</button>
        </div>

        <div id="game-screen" class="game-area" style="display: none;">
            <div class="score-info">
                <span>é¡Œç›®: <span id="current-question">1</span>/5</span>
                <span>åˆ†æ•¸: <span id="current-score">0</span></span>
            </div>
            
            <div class="painting-container">
                <img id="painting" class="painting" src="" alt="æ–‡è—å¾©èˆˆç•«ä½œ">
                <div id="painting-title" class="painting-title"></div>
            </div>
            
            <div class="question">é€™å¹…ç•«æ˜¯å“ªä½ç•«å®¶çš„ä½œå“ï¼Ÿ</div>
            
            <div class="options" id="options">
                <!-- é¸é …æœƒå‹•æ…‹ç”Ÿæˆ -->
            </div>
            
            <div id="explanation" class="explanation" style="display: none;">
                <h4>ğŸ“š ä½œå“ä»‹ç´¹</h4>
                <div id="explanation-content" class="explanation-content"></div>
            </div>
            
            <button id="next-btn" class="next-btn" style="display: none;" onclick="nextQuestion()">ä¸‹ä¸€é¡Œ</button>
        </div>

        <div id="result-screen" class="game-area" style="display: none;">
            <div class="final-score">
                <h2>ğŸ† éŠæˆ²çµæŸï¼ ğŸ†</h2>
                <p>æ‚¨çš„æœ€çµ‚åˆ†æ•¸ï¼š<span id="final-score">0</span> / 100</p>
                <div id="grade"></div>
            </div>
            
            <div id="name-input-section" class="name-input-container" style="display: none;">
                <p style="color: #8B4513; font-weight: bold; margin-bottom: 15px;">
                    ğŸ‰ æ­å–œï¼æ‚¨çš„åˆ†æ•¸é€²å…¥å‰ååï¼
                </p>
                <input type="text" id="player-name" class="name-input" placeholder="è«‹è¼¸å…¥ç­ç´šåº§è™Ÿå§“å" maxlength="20">
                <br>
                <button class="submit-score-btn" onclick="submitScore()">æäº¤åˆ†æ•¸</button>
                <button class="start-btn" onclick="skipSubmission()">ç•¥é</button>
            </div>
            
            <div id="leaderboard-section" style="display: none;">
                <div class="leaderboard">
                    <h3>ğŸ† æ’è¡Œæ¦œ - å‰åå</h3>
                    <div id="leaderboard-list"></div>
                </div>
            </div>
            
            <div id="result-buttons" style="display: none;">
                <button class="view-leaderboard-btn" onclick="toggleLeaderboard()">æŸ¥çœ‹æ’è¡Œæ¦œ</button>
                <button class="start-btn" onclick="restartGame()">é‡æ–°é–‹å§‹</button>
            </div>
        </div>
        
        <div id="leaderboard-screen" class="game-area" style="display: none;">
            <div class="leaderboard">
                <h3>ğŸ† æ’è¡Œæ¦œ - å‰åå</h3>
                <div id="main-leaderboard-list"></div>
            </div>
            <button class="start-btn" onclick="backToMenu()">å›åˆ°ä¸»é¸å–®</button>
        </div>
    </div>

    <script>
        // æ–‡è—å¾©èˆˆç•«ä½œè³‡æ–™åº«
        const paintings = [
{
        title: "è–æ¯èˆ‡è–å­",
        image: "image/Icon_of_the_Virgin_and_Child.jpg",
        artist: "ä½šå",
        options: ["ä½šå", "å–¬æ‰˜", "å¥‡é¦¬å¸ƒä¼Š", "æ‹‰æ–çˆ¾"],
        explanation: "ç•«ä¸­è¡¨æƒ…èŠåš´çš„è–æ¯èˆ‡è–å­ï¼Œè¥¯ä¸Šé‡‘å…‰é–ƒé–ƒçš„èƒŒæ™¯ï¼Œæ˜¯ä¸æ˜¯è®“äººæ„Ÿå—åˆ°ä¸­ä¸–ç´€ç•«å®¶æƒ³å¼·èª¿å°å®—æ•™äººç‰©çš„æ•¬ä»°å‘¢ï¼Ÿ"
    },
    {
        title: "è–æ¯å­èˆ‡å¤©ä½¿",
        image: "image/Madonna_Enthroned_with_Saints_Francis_and_Damian.jpg",
        artist: "å¥‡é¦¬å¸ƒä¼Š",
        options: ["å¥‡é¦¬å¸ƒä¼Š", "å–¬æ‰˜", "æ‹‰æ–çˆ¾", "æ³¢æåˆ‡åˆ©"],
        explanation: "ååœ¨æ¤…å­ä¸Šçš„è–æ¯èˆ‡è–å­èˆ‡èº«æ—åœç¹çš„å¤©ä½¿èˆ‡è–å¾’ï¼Œè®“ç•«é¢å‘ˆç¾ç©ºé–“æ„Ÿï¼Œä½†äººç‰©å¤§å°èˆ‡ä½ç½®å®‰æ’æœ‰é»å¥‡æ€ªï¼Œæ‰¾æ‰¾çœ‹æœ‰å“ªäº›ä¸åˆç†çš„åœ°æ–¹ï¼Ÿ"
    },
    {
        title: "å¤§å…¬çˆµè–æ¯",
        image: "image/The_Grand_Duke's_Madonna.jpg",
        artist: "æ‹‰æ–çˆ¾",
        options: ["æå¥§ç´å¤šÂ·é”Â·æ–‡è¥¿", "æ‹‰æ–çˆ¾", "ç±³é–‹æœ—åŸºç¾…", "æé¦™"],
        explanation: "æ–‡è—å¾©èˆˆæ™‚æœŸçš„ç•«å®¶æ‹‰æ–çˆ¾æ‰€ç•«çš„è–æ¯èˆ‡è–å­ï¼Œæ¯”èµ·ä¸­ä¸–ç´€åŒæ¨£çš„è–æ¯é¡Œæç¹ªç•«æœ‰ä½•ä¸åŒå‘¢ï¼Ÿ"
    },
    {
        title: "å“€æ‚¼è€¶ç©Œ",
        image: "image/The_Lamentation_of_Christ.jpg",
        artist: "å–¬æ‰˜",
        options: ["å–¬æ‰˜", "å¥‡é¦¬å¸ƒä¼Š", "é¦¬è–©å¥‡æ­", "æ³¢æåˆ‡åˆ©"],
        explanation: "å–¬æ‰˜è©¦åœ–è¡¨ç¾å‡ºè€¶ç©Œé€å»çš„æˆ²åŠ‡æ€§æ™‚åˆ»ï¼Œè®“äººæ·±æ·±æ„Ÿå—åˆ°ç•«ä¸­äººç‰©å€‘çš„æ‚²ç—›èˆ‡å“€æ‚½ã€‚"
    },
    {
        title: "è–ä¸‰ä½ä¸€é«”",
        image: "image/The_Trinity.jpg",
        artist: "é¦¬è–©å¥‡æ­",
        options: ["å–¬æ‰˜", "é¦¬è–©å¥‡æ­", "çƒåˆ‡ç¾…", "å¤šé‚£å¤ªç¾…"],
        explanation: "é€™å¹…å£ç•«çœŸå¯¦çš„å°±åƒç‰†é¢ä¸Šé‘¿å‡ºä¸€å€‹ç©ºé–“ï¼Œé€è¦–æŠ€æ³•å¯ä»¥è¡¨ç¾è¦–è¦ºä¸Šçš„å¹»è±¡ï¼Œåœ¨å¹³é¢ä¸Šå‰µé€ å‡ºç©ºé–“èˆ‡è·é›¢æ„Ÿã€‚"
    },
    {
        title: "è–é¦¬è«¾ä¹‹æˆ°",
        image: "image/The_Battle_of_San_Romano.jpg",
        artist: "çƒåˆ‡ç¾…",
        options: ["çƒåˆ‡ç¾…", "é¦¬è–©å¥‡æ­", "æ³¢æåˆ‡åˆ©", "é”æ–‡è¥¿"],
        explanation: "çƒåˆ‡ç¾…ç‚ºäº†è¿½æ±‚çœŸå¯¦ï¼Œçª®å…¶ä¸€ç”Ÿéƒ½åœ¨é‘½ç ”é€è¦–æŠ€æ³•ï¼Œåœ¨é€™å¹…ç•«ä¸­ä»–æ˜¯å¦‚ä½•é‹ç”¨çš„å‘¢ï¼Ÿä»”ç´°è§€å¯Ÿåœ°ä¸Šçš„ç·šç´¢å§ï¼"
    },
    {
        title: "ç¶­ç´æ–¯çš„èª•ç”Ÿ",
        image: "image/The_Birth_of_Venus.jpg",
        artist: "æ³¢æåˆ‡åˆ©",
        options: ["æ³¢æåˆ‡åˆ©", "æ‹‰æ–çˆ¾", "å–¬çˆ¾å–¬å…§", "æé¦™"],
        explanation: "ç¶­ç´æ–¯æ˜¯å¸Œè‡˜ç¥è©±ä¸­ä»£è¡¨ã€Œæ„›èˆ‡ç¾ã€çš„å¥³ç¥ï¼Œé€™å¹…ç•«ä¸­æ³¢æåˆ‡åˆ©æç¹ªçš„ç¶­ç´æ–¯å½¢è±¡ï¼Œæ˜¯ä¸æ˜¯é¡¯å¾—å„ªé›…åˆè¿·äººå‘¢ï¼Ÿ"
    },
    {
        title: "å¤©å ‚ä¹‹é–€ï¼ˆå±€éƒ¨ï¼‰",
        image: "image/Porta_del_Paradiso.jpg",
        artist: "å‰è²çˆ¾è’‚",
        options: ["å‰è²çˆ¾è’‚", "å¤šé‚£å¤ªç¾…", "ç±³é–‹æœ—åŸºç¾…", "ä¼¯é­¯æ¶…å…§æ–¯åŸº"],
        explanation: "å‰è²çˆ¾è’‚ä»¥é€è¦–æŠ€æ³•å°‡å ´æ™¯åŠäººç‰©è¡¨ç¾å¾—å¾ˆçœŸå¯¦ï¼›ä»–èŠ±äº†è¿‘30å¹´æ‰å®Œæˆã€Šå¤©å ‚ä¹‹é–€ã€‹çš„æµ®é›•ä½œå“ï¼Œæ˜¯ä¸æ˜¯å¾ˆé©šäººå‘¢ï¼Ÿ"
    },
    {
        title: "å¤§è¡›åƒ",
        image: " image/David_(Donatello).jpg",
        artist: "å¤šé‚£å¤ªç¾…",
        options: ["å¤šé‚£å¤ªç¾…", "ç±³é–‹æœ—åŸºç¾…", "éŸ‹ç¾…åŸºå¥§", "å‰è²çˆ¾è’‚"],
        explanation: "å¤šé‚£å¤ªç¾…è¡¨ç¾ã€Šè–ç¶“ã€‹æ•…äº‹ä¸­å¤§è¡›å–å¾—å‹åˆ©è¸©è‘—å·¨äººå“¥åˆ©äºçš„æ¨£å­ï¼Œç‚ºäº†æº–ç¢ºå‘ˆç¾äººé«”æ§‹é€ ï¼Œä»–é‚„ç ”ç©¶è§£å‰–å­¸å‘¢ï¼"
    },
    {
        title: "è–å–¬æ²»åƒ",
        image: " image/St._George.jpg",
        artist: "å¤šé‚£å¤ªç¾…",
        options: ["ç±³é–‹æœ—åŸºç¾…", "å¤šé‚£å¤ªç¾…", "åˆ‡åˆ©å°¼", "è©¹æ³¢éš†é‚£"],
        explanation: "ã€Œè–å–¬æ²»å± é¾ã€æ˜¯è¥¿æ–¹æµå‚³çš„å¤è€å‚³èªªï¼›è–å–¬æ²»å³å°‡å‡ºç™¼æ‹¯æ•‘è¢«æƒ¡é¾æ”»æ“Šçš„æ‘èŠï¼Œä½ æ„Ÿå—åˆ°ä»–è‡‰ä¸Šé‚£è‚¡æ„æ°£é¢¨ç™¼çš„è‡ªä¿¡å—ï¼Ÿ"
    },
    {
        title: "è–æ¯ç™¾èŠ±å¤§æ•™å ‚(åœ“é ‚)",
        image: "image/Basilica_di_Santa_Maria_del_Fior's_Duomo.jpg",
        artist: "å¸ƒé­¯å…§åˆ©å¥‡",
        options: ["å¸ƒé­¯å…§åˆ©å¥‡", "ç±³é–‹æœ—åŸºç¾…", "ä¼¯æ‹‰å­Ÿç‰¹", "é˜¿çˆ¾ä¼¯è’‚"],
        explanation: "åœ“é ‚æ˜¯æ–‡è—å¾©èˆˆå»ºç¯‰çš„ä»£è¡¨è±¡å¾µï¼Œé€™å¯æ˜¯ç•¶æ™‚æœ€å‰µæ–°çš„å»ºç¯‰æ–¹æ³•ã€‚æƒ³ä¸€æƒ³ï¼Œé€™æ¨£çš„åœ“é ‚æ˜¯å¦‚ä½•è“‹å‡ºä¾†çš„ï¼Ÿ"
    },
    {
        title: "è–å®‰å¾·çƒˆæ•™å ‚",
        image: "image/Basilica_of_Sant'_Andrea.jpg",
        artist: "é˜¿çˆ¾ä¼¯è’‚",
        options: ["å¸ƒé­¯å…§åˆ©å¥‡", "ç±³é–‹ç¾…ä½", "é˜¿çˆ¾ä¼¯è’‚", "å°æ¡‘åŠ ç¾…"],
        explanation: "ä»”ç´°è§€å¯Ÿé€™æ£Ÿå»ºç¯‰æ­£é¢çš„å·¦å³å…©é‚Šï¼Œæ˜¯ä¸æ˜¯åƒç…§é¡å­ä¸€æ¨£ï¼Ÿé€™æ¨£çš„å°ç¨±å½¢å¼ï¼Œæ˜¯ä¸æ˜¯æœ‰ä¸€ç¨®ç©©å®šçš„æ„Ÿè¦ºå‘¢ï¼Ÿ"
    },
    {
        title: "è–æ®¤",
        image: "image/The_Pieta.jpg",
        artist: "ç±³é–‹æœ—åŸºç¾…",
        options: ["å¤šé‚£å¤ªç¾…", "ç±³é–‹æœ—åŸºç¾…", "æ‹‰æ–çˆ¾", "é”æ–‡è¥¿"],
        explanation: "é€™ä»¶ä½œå“è¡¨ç¾å‡ºè—è¡“å®¶ç´°è†©çš„æƒ…æ„Ÿèˆ‡é«˜è¶…æŠ€å·§ï¼Œç‚ºäº†è®“å¤§å®¶è¨˜ä½ï¼Œè—è¡“å®¶é‚„åˆ»ä¸Šè‡ªå·±çš„å¤§åï¼Œæ‰¾æ‰¾çœ‹åœ¨å“ªè£¡å‘¢ï¼Ÿ"
    },
    {
        title: "å¤§è¡›",
        image: "image/David_(Michelangelo).jpg",
        artist: "ç±³é–‹æœ—åŸºç¾…",
        options: ["ç±³é–‹æœ—åŸºç¾…", "å¤šé‚£å¤ªç¾…", "åˆ‡åˆ©å°¼", "è©¹æ³¢éš†é‚£"],
        explanation: "ç±³é–‹æœ—åŸºç¾…æ“…é•·ä»¥å®Œç¾çš„è‚Œè‚‰ç·šæ¢ä¾†è¡¨ç¾äººé«”çš„åŠ›é‡æ„Ÿï¼Œå¤§è¡›å´èº«ç«™ç«‹ï¼Œè¿é¢è€Œæˆ°å·¨äººå“¥åˆ©äºï¼Œéš¨è‘—ä»–çš„çœ¼ç¥çœ‹å»ï¼Œæ°£å‹¢å‡Œäººã€‚"
    },
    {
        title: "ç¶­ç‰¹é­¯å¨äºº",
        image: "image/The_Proportions_of_the_human_figure.jpg",
        artist: "é”æ–‡è¥¿",
        options: ["é”æ–‡è¥¿", "ç±³é–‹æœ—åŸºç¾…", "æ‹‰æ–çˆ¾", "é˜¿çˆ¾ä¼¯è’‚"],
        explanation: "é€™æ˜¯é”æ–‡è¥¿æ‰€ç•«çš„äººé«”æ¯”ä¾‹åœ–ï¼Œæ‰¾æ‰¾çœ‹å…¶ä¸­è—è‘—ä»€éº¼å®Œç¾æ¯”ä¾‹å‘¢ï¼Ÿä¸‹æ–¹çš„ç­†è¨˜æ–‡å­—ï¼Œåˆæœ‰ä½•ç‰¹åˆ¥ä¹‹è™•ï¼Ÿ"
    },
    {
        title: "è’™å¨œéº—è",
        image: "image/Mona_Lisa.jpg",
        artist: "é”æ–‡è¥¿",
        options: ["é”æ–‡è¥¿", "æ‹‰æ–çˆ¾", "æé¦™", "æ³¢æåˆ‡åˆ©"],
        explanation: "è’™å¨œéº—èçš„é‚£ä¸€æŠ¹æ·ºæ·ºå¾®ç¬‘ï¼Œä½ çŸ¥é“è—è¡“å®¶æ–½äº†ä»€éº¼æ¨£çš„é­”æ³•å—ï¼Ÿä½ å¯ä»¥èªªå‡ºé€™å¹…ç•«é‚„è˜Šè—äº†å¤šå°‘ç²¾é‡‡æ•…äº‹å‘¢ï¼Ÿ"
    },
    {
        title: "æœ€å¾Œçš„æ™šé¤",
        image: "image/The_Last_Supper.jpg",
        artist: "é”æ–‡è¥¿",
        options: ["ç±³é–‹æœ—åŸºç¾…", "é”æ–‡è¥¿", "æ‹‰æ–çˆ¾", "ä¸æ‰˜åˆ—æ‰˜"],
        explanation: "ä½ çŸ¥é“ã€Œæœ€å¾Œçš„æ™šé¤ã€é€™å€‹è–ç¶“æ•…äº‹å—ï¼Ÿé”æ–‡è¥¿æç¹ªé€™å€‹æ¥µå¯Œæˆ²åŠ‡æ€§çš„æƒ…ç¯€ï¼Œæ‰¾æ‰¾çœ‹èª°æ˜¯é‚£å€‹å‡ºè³£è€¶ç©Œçš„äººå‘¢ï¼Ÿ"
    },
    {
        title: "å‰µé€ äºç•¶",
        image: "image/The_Creation_of_Adam.jpg",
        artist: "ç±³é–‹æœ—åŸºç¾…",
        options: ["ç±³é–‹æœ—åŸºç¾…", "æ‹‰æ–çˆ¾", "é”æ–‡è¥¿", "å–¬æ‰˜"],
        explanation: "ç•«é¢ä¸­å…©éš»æ‰‹äº¤æœƒçš„ä¸€ç¬é–“ï¼Œè±¡å¾µä¸Šå¸ç‚ºäººé¡æ³¨å…¥æ»¿æ»¿çš„ç”Ÿå‘½ã€æ™ºæ…§èˆ‡åŠ›é‡ï¼Œä½ æ˜¯å¦æ„Ÿå—åˆ°äº†é‚£è‚¡èƒ½é‡å‘¢ï¼Ÿ"
    },
    {
        title: "é›…å…¸å­¸é™¢",
        image: "image/School_of_Athens,_from_the_Stanza_della_Segnatura.jpg",
        artist: "æ‹‰æ–çˆ¾",
        options: ["æ‹‰æ–çˆ¾", "ç±³é–‹æœ—åŸºç¾…", "é”æ–‡è¥¿", "å–¬çˆ¾å–¬å…§"],
        explanation: "é€™å¹…ç•«ä¸­çš„äººç‰©æœ‰è¨±å¤šä¸åŒæ™‚ä»£ã€ä¸åŒå­¸è¡“é ˜åŸŸçš„å‰å¤§è‘—åå­¸è€…ï¼Œä»–å€‘æ­£åœ¨å°ˆæ³¨è¨è«–è‘—å„ç¨®é‡è¦äº‹æƒ…ï¼Œä½ çŸ¥é“æœ‰èª°å—ï¼Ÿ"
    },
    {
        title: "è‰åœ°ä¸Šçš„è–æ¯",
        image: "image/Madonna_del_Prato.jpg",
        artist: "æ‹‰æ–çˆ¾",
        options: ["æ‹‰æ–çˆ¾", "å–¬ç“¦å°¼Â·è²åˆ©å°¼", "æé¦™", "æå¥§ç´å¤šÂ·é”Â·æ–‡è¥¿"],
        explanation: "æ‹‰æ–çˆ¾ç¸½èƒ½å°‡è–æ¯ç¥¥å’Œã€æº«æš–çš„æ°£è³ªè¡¨ç¾å¾—æ·‹æ¼“ç›¡è‡´ï¼Œè€Œå°è€¶ç©Œèˆ‡å°æ–½æ´—è€…ç´„ç¿°ï¼Œå‰‡å¦‚ä¸€èˆ¬å­©å­èˆ¬èª¿çš®æ´»æ½‘ã€‚"
    },
    {
        title: "è–å½¼å¾—æ•™å ‚åœ“é ‚è¨­è¨ˆè‰ç¨¿",
        image: "image/Study_for_St._Peter's_Dome.jpg",
        artist: "ç±³é–‹æœ—åŸºç¾…",
        options: ["ç±³é–‹æœ—åŸºç¾…", "ä¼¯æ‹‰å­Ÿç‰¹", "å¸ƒé­¯å…§åˆ©å¥‡", "æ‹‰æ–çˆ¾"],
        explanation: "ç±³é–‹æœ—åŸºç¾…ç¹ªè£½äº†è¨±å¤šåœ“é ‚å»ºç¯‰è‰åœ–ï¼Œæ¯”æ¯”çœ‹å’Œè–æ¯ç™¾èŠ±å¤§æ•™å ‚æœ‰ä½•ä¸åŒï¼Ÿ"
    },
    {
        title: "æ‘©è¥¿",
        image: "image/Moses.jpg",
        artist: "ç±³é–‹æœ—åŸºç¾…",
        options: ["ç±³é–‹æœ—åŸºç¾…", "å¤šé‚£å¤ªç¾…", "è©¹æ³¢éš†é‚£", "éŸ‹ç¾…åŸºå¥§"],
        explanation: "æ‘©è¥¿æ˜¯çŒ¶å¤ªæ°‘æ—çš„è‹±é›„é ˜è¢–ã€‚ç±³é–‹æœ—åŸºç¾…ä»¥ä¸€ä½æ™ºè€…çš„å½¢è±¡æç¹ªä»–ï¼Œæ ©æ ©å¦‚ç”Ÿçš„æ¨£è²Œï¼Œå¯çœ‹å‡ºè—è¡“å®¶ç´”ç†Ÿçš„é›•åˆ»æŠ€è¡“ã€‚"
    },
    {
        title: "æœ€å¾Œçš„å¯©åˆ¤",
        image: "image/The_Last_Judgment.jpg",
        artist: "ç±³é–‹æœ—åŸºç¾…",
        options: ["ç±³é–‹æœ—åŸºç¾…", "å–¬æ‰˜", "æ‹‰æ–çˆ¾", "ä¸æ‰˜åˆ—æ‰˜"],
        explanation: "ã€Œ æœ€å¾Œçš„å¯©åˆ¤ ã€ æ˜¯è–ç¶“æ•…äº‹ï¼Œæç¹ªæœ«æ—¥ä¾†è‡¨çš„æ™¯è±¡ï¼Œä»”ç´°è§€å¯Ÿç•«é¢ä¸­è˜Šè—äº†å¤šå°‘æ•…äº‹ï¼Ÿæ‰¾æ‰¾çœ‹ï¼Œç±³é–‹æœ—åŸºç¾…ä¹Ÿå°‡è‡ªå·±ç•«åœ¨è£¡é¢å–”ï¼"
    },
    {
        title: "è–æ¯èˆ‡è–å¬°ç¿’ä½œ",
        image: "image/Studies_for_Madonna_and_child.jpg",
        artist: "ç±³é–‹æœ—åŸºç¾…",
        options: ["ç±³é–‹æœ—åŸºç¾…", "é”æ–‡è¥¿", "æ‹‰æ–çˆ¾", "æ³¢æåˆ‡åˆ©"],
        explanation: "è–å­èˆ‡è–æ¯èº«é«”çš„è¦ªå¯†äº¤ç–Šæ˜¯æ–‡è—å¾©èˆˆæ™‚æœŸçªç ´æ€§çš„è¡¨ç¾ï¼Œé€™ç¨®è¡¨ç¾æ–¹æ³•ï¼Œæ˜¯ä¸æ˜¯çµ¦äººæ›´ç”Ÿå‹•è¦ªåˆ‡çš„æ„Ÿå—å‘¢ï¼Ÿ"
    },
    {
        title: "é£›è¡Œå™¨",
        image: "image/Macchina_Volante.jpg",
        artist: "é”æ–‡è¥¿",
        options: ["é”æ–‡è¥¿", "å¸ƒé­¯å…§åˆ©å¥‡", "ä¼½åˆ©ç•¥", "é˜¿çˆ¾ä¼¯è’‚"],
        explanation: "é”æ–‡è¥¿æ‡·æŠ±è‘—é£›è¡Œå¤¢ï¼Œæ‰€ä»¥ä»–èŠ±äº†è¨±å¤šæ™‚é–“è¨­è¨ˆè‰ç¨¿ï¼Œä½ æ˜¯å¦ä¹Ÿæœ‰ä»€éº¼å¤©é¦¬è¡Œç©ºçš„æƒ³åƒèˆ‡ç™¼æ˜å‘¢ï¼Ÿ"
    },
        ];

        let currentQuestionIndex = 0;
        let score = 0;
        let gameQuestions = [];
        let answered = false;
        let playerName = '';

        // æ’è¡Œæ¦œç®¡ç†
        class LeaderboardManager {
            constructor() {
                this.storageKey = 'renaissanceQuizLeaderboard';
                this.maxEntries = 10;
            }

            getLeaderboard() {
                try {
                    const stored = localStorage.getItem(this.storageKey);
                    return stored ? JSON.parse(stored) : [];
                } catch (error) {
                    console.error('è®€å–æ’è¡Œæ¦œå¤±æ•—:', error);
                    return [];
                }
            }

            saveLeaderboard(leaderboard) {
                try {
                    localStorage.setItem(this.storageKey, JSON.stringify(leaderboard));
                    return true;
                } catch (error) {
                    console.error('å„²å­˜æ’è¡Œæ¦œå¤±æ•—:', error);
                    return false;
                }
            }

            isTopScore(newScore) {
                const leaderboard = this.getLeaderboard();
                if (leaderboard.length < this.maxEntries) {
                    return true;
                }
                return newScore > leaderboard[leaderboard.length - 1].score;
            }

            addScore(name, score) {
                const leaderboard = this.getLeaderboard();
                
                // æ·»åŠ æ–°åˆ†æ•¸
                leaderboard.push({
                    name: name.trim() || 'åŒ¿åç©å®¶',
                    score: score,
                    date: new Date().toLocaleDateString('zh-TW')
                });

                // æ’åºï¼ˆåˆ†æ•¸é«˜åˆ°ä½ï¼‰
                leaderboard.sort((a, b) => b.score - a.score);

                // ä¿æŒå‰åå
                const topTen = leaderboard.slice(0, this.maxEntries);
                
                this.saveLeaderboard(topTen);
                
                // è¿”å›æ–°åˆ†æ•¸çš„æ’å
                return topTen.findIndex(entry => 
                    entry.name === (name.trim() || 'åŒ¿åç©å®¶') && 
                    entry.score === score
                ) + 1;
            }

            renderLeaderboard(containerId, highlightScore = null) {
                const container = document.getElementById(containerId);
                const leaderboard = this.getLeaderboard();
                
                if (leaderboard.length === 0) {
                    container.innerHTML = '<p style="text-align: center; color: #8B4513;">æš«ç„¡è¨˜éŒ„ï¼Œå¿«ä¾†æŒ‘æˆ°å§ï¼</p>';
                    return;
                }

                let html = '';
                leaderboard.forEach((entry, index) => {
                    const isNewRecord = highlightScore && entry.score === highlightScore;
                    const rankEmoji = index === 0 ? 'ğŸ¥‡' : index === 1 ? 'ğŸ¥ˆ' : index === 2 ? 'ğŸ¥‰' : 'ğŸ…';
                    
                    html += `
                        <div class="leaderboard-entry ${isNewRecord ? 'new-record' : ''}">
                            <span class="leaderboard-rank">${rankEmoji} ${index + 1}</span>
                            <span class="leaderboard-name">${entry.name}</span>
                            <span class="leaderboard-score">${entry.score} åˆ†</span>
                        </div>
                    `;
                });
                
                container.innerHTML = html;
            }

            clearLeaderboard() {
                if (confirm('ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰æ’è¡Œæ¦œè¨˜éŒ„å—ï¼Ÿæ­¤æ“ä½œç„¡æ³•å¾©åŸï¼')) {
                    localStorage.removeItem(this.storageKey);
                    alert('æ’è¡Œæ¦œå·²æ¸…é™¤ï¼');
                    return true;
                }
                return false;
            }
        }

        const leaderboard = new LeaderboardManager();

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function startGame() {
            // éš¨æ©Ÿé¸æ“‡5é“é¡Œç›®
            gameQuestions = shuffleArray(paintings).slice(0, 5);
            currentQuestionIndex = 0;
            score = 0;
            
            document.getElementById('intro-screen').style.display = 'none';
            document.getElementById('game-screen').style.display = 'block';
            document.getElementById('result-screen').style.display = 'none';
            document.getElementById('leaderboard-screen').style.display = 'none';
            
            loadQuestion();
        }

        function loadQuestion() {
            if (currentQuestionIndex >= gameQuestions.length) {
                showResults();
                return;
            }

            answered = false;
            const question = gameQuestions[currentQuestionIndex];
            
            // æ›´æ–°é¡Œç›®è³‡è¨Š
            document.getElementById('current-question').textContent = currentQuestionIndex + 1;
            document.getElementById('current-score').textContent = score;
            
            // æ¸…ç†ä¹‹å‰çš„åœ–ç‰‡å®¹å™¨
            const container = document.querySelector('.painting-container');
            const existingPlaceholder = container.querySelector('.image-placeholder');
            if (existingPlaceholder) {
                existingPlaceholder.remove();
            }
            
            // è¨­ç½®ç•«ä½œ
            const paintingImg = document.getElementById('painting');
            paintingImg.style.display = 'block'; // ç¢ºä¿åœ–ç‰‡é¡¯ç¤º
            paintingImg.src = question.image;
            
            paintingImg.onerror = function() {
                // å¦‚æœåœ–ç‰‡è¼‰å…¥å¤±æ•—ï¼Œå‰µå»ºä¸€å€‹ç¾è§€çš„æ›¿ä»£é¡¯ç¤º
                this.style.display = 'none';
                const container = this.parentElement;
                
                // æª¢æŸ¥æ˜¯å¦å·²ç¶“æœ‰æ›¿ä»£å…ƒç´ 
                let placeholder = container.querySelector('.image-placeholder');
                if (!placeholder) {
                    placeholder = document.createElement('div');
                    placeholder.className = 'image-placeholder';
                    placeholder.style.cssText = `
                        width: 400px;
                        height: 300px;
                        background: linear-gradient(135deg, #f0f0f0, #e0e0e0);
                        border: 8px solid #8B4513;
                        border-radius: 10px;
                        display: flex;
                        flex-direction: column;
                        justify-content: center;
                        align-items: center;
                        margin: 0 auto;
                        color: #8B4513;
                        font-size: 1.2em;
                        text-align: center;
                        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
                    `;
                    placeholder.innerHTML = `
                        <div style="font-size: 3em; margin-bottom: 10px;">ğŸ¨</div>
                        <div style="font-weight: bold;">${question.title}</div>
                        <div style="font-size: 0.9em; margin-top: 5px; color: #666;">åœ–ç‰‡è¼‰å…¥ä¸­...</div>
                    `;
                    container.insertBefore(placeholder, this);
                }
            };
            
            document.getElementById('painting-title').textContent = question.title;
            
            // ç”Ÿæˆé¸é …
            const optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';
            
            // éš¨æ©Ÿæ’åˆ—é¸é …
            const shuffledOptions = shuffleArray(question.options);
            
            shuffledOptions.forEach(option => {
                const button = document.createElement('button');
                button.className = 'option';
                button.textContent = option;
                button.onclick = () => selectAnswer(option, question.artist);
                optionsContainer.appendChild(button);
            });
            
            // éš±è—èªªæ˜å’Œä¸‹ä¸€é¡ŒæŒ‰éˆ•
            document.getElementById('explanation').style.display = 'none';
            document.getElementById('next-btn').style.display = 'none';
        }

        function selectAnswer(selectedOption, correctAnswer) {
            if (answered) return;
            answered = true;
            
            const question = gameQuestions[currentQuestionIndex];
            const options = document.querySelectorAll('.option');
            
            options.forEach(option => {
                if (option.textContent === correctAnswer) {
                    option.classList.add('correct');
                } else if (option.textContent === selectedOption && selectedOption !== correctAnswer) {
                    option.classList.add('incorrect');
                }
                option.style.pointerEvents = 'none';
            });
            
            if (selectedOption === correctAnswer) {
                score += 20;
                document.getElementById('current-score').textContent = score;
            }
            
            // é¡¯ç¤ºä½œå“èªªæ˜
            setTimeout(() => {
                const explanationDiv = document.getElementById('explanation');
                const explanationContent = document.getElementById('explanation-content');
                
                if (explanationDiv && explanationContent && question.explanation) {
                    explanationContent.textContent = question.explanation;
                    explanationDiv.style.display = 'block';
                    
                    // å¹³æ»‘æ»¾å‹•åˆ°èªªæ˜å€åŸŸ
                    explanationDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
                
                document.getElementById('next-btn').style.display = 'block';
            }, 1500);
        }

        function nextQuestion() {
            currentQuestionIndex++;
            loadQuestion();
        }

        function showResults() {
            document.getElementById('game-screen').style.display = 'none';
            document.getElementById('result-screen').style.display = 'block';
            document.getElementById('final-score').textContent = score;
            
            const gradeElement = document.getElementById('grade');
            let grade = '';
            let emoji = '';
            
            if (score === 100) {
                grade = 'å®Œç¾ï¼æ‚¨æ˜¯æ–‡è—å¾©èˆˆå°ˆå®¶ï¼';
                emoji = 'ğŸŒŸ';
            } else if (score >= 80) {
                grade = 'å„ªç§€ï¼æ‚¨å°æ–‡è—å¾©èˆˆå¾ˆäº†è§£ï¼';
                emoji = 'ğŸ¨';
            } else if (score >= 60) {
                grade = 'ä¸éŒ¯ï¼ç¹¼çºŒå­¸ç¿’æ–‡è—å¾©èˆˆè—è¡“ï¼';
                emoji = 'ğŸ“š';
            } else if (score >= 40) {
                grade = 'é‚„å¯ä»¥ï¼å¤šçœ‹çœ‹æ–‡è—å¾©èˆˆç•«ä½œå§ï¼';
                emoji = 'ğŸ¤”';
            } else {
                grade = 'åŠ æ²¹ï¼æ–‡è—å¾©èˆˆè—è¡“ç­‰æ‚¨æ¢ç´¢ï¼';
                emoji = 'ğŸ’ª';
            }
            
            gradeElement.innerHTML = `<h3>${emoji} ${grade} ${emoji}</h3>`;
            
            // æª¢æŸ¥æ˜¯å¦é€²å…¥æ’è¡Œæ¦œ
            if (leaderboard.isTopScore(score)) {
                document.getElementById('name-input-section').style.display = 'block';
                document.getElementById('result-buttons').style.display = 'none';
                document.getElementById('player-name').focus();
            } else {
                document.getElementById('name-input-section').style.display = 'none';
                document.getElementById('result-buttons').style.display = 'block';
            }
        }

        function submitScore() {
            const nameInput = document.getElementById('player-name');
            const name = nameInput.value.trim();
            
            if (!name) {
                alert('è«‹è¼¸å…¥æ‚¨çš„å¤§åï¼');
                nameInput.focus();
                return;
            }
            
            if (name.length > 20) {
                alert('åå­—ä¸èƒ½è¶…é20å€‹å­—ç¬¦ï¼');
                nameInput.focus();
                return;
            }
            
            // æ·»åŠ åˆ°æ’è¡Œæ¦œ
            const rank = leaderboard.addScore(name, score);
            
            // é¡¯ç¤ºçµæœ
            document.getElementById('name-input-section').style.display = 'none';
            document.getElementById('leaderboard-section').style.display = 'block';
            document.getElementById('result-buttons').style.display = 'block';
            
            // æ¸²æŸ“æ’è¡Œæ¦œä¸¦é«˜äº®æ–°åˆ†æ•¸
            leaderboard.renderLeaderboard('leaderboard-list', score);
            
            // é¡¯ç¤ºæ­å–œè¨Šæ¯
            setTimeout(() => {
                alert(`æ­å–œï¼æ‚¨ç²å¾—ç¬¬ ${rank} åï¼`);
            }, 500);
        }

        function skipSubmission() {
            document.getElementById('name-input-section').style.display = 'none';
            document.getElementById('result-buttons').style.display = 'block';
        }

        function toggleLeaderboard() {
            const leaderboardSection = document.getElementById('leaderboard-section');
            if (leaderboardSection.style.display === 'none') {
                leaderboardSection.style.display = 'block';
                leaderboard.renderLeaderboard('leaderboard-list');
            } else {
                leaderboardSection.style.display = 'none';
            }
        }

        function showLeaderboard() {
            document.getElementById('intro-screen').style.display = 'none';
            document.getElementById('leaderboard-screen').style.display = 'block';
            leaderboard.renderLeaderboard('main-leaderboard-list');
        }

        function backToMenu() {
            document.getElementById('leaderboard-screen').style.display = 'none';
            document.getElementById('intro-screen').style.display = 'block';
        }

        function restartGame() {
            // é‡ç½®é¡¯ç¤ºç‹€æ…‹
            document.getElementById('leaderboard-section').style.display = 'none';
            startGame();
        }

        // ç›£è½ Enter éµæäº¤åˆ†æ•¸
        document.addEventListener('DOMContentLoaded', function() {
            const nameInput = document.getElementById('player-name');
            if (nameInput) {
                nameInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        submitScore();
                    }
                });
            }
        });

        // ç¢ºä¿åœ–ç‰‡æ­£ç¢ºè¼‰å…¥
        window.addEventListener('load', function() {
            const images = document.querySelectorAll('img');
            images.forEach(img => {
                img.addEventListener('error', function() {
                    console.log('åœ–ç‰‡è¼‰å…¥å¤±æ•—:', this.src);
                });
            });
        });
    </script>
</body>
</html>